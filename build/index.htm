<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Wikigle</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/wikigle.css" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous">
    </script>
    <script 
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
      crossorigin="anonymous">
    </script>
    <script src="https://unpkg.com/vue"></script>
  </head>
  <body>
  
    <div id="wikigle">

      <div id="identity" style="display:none">
        <div id="wikigle-logo"><img src="/images/wikigle-logo.png" class="img img-responsive"></div>
        <hr>
      </div>

      <div id="form" style="display:block">
          <div id="wikigle-logo"><img src="/images/wikigle-logo.png" class="img img-responsive"></div>
          <form id="submitform">
            <input id="wikiKeyword" v-model="wikiKeyword" type="text" placeholder="What are you looking for?" class="form">
          </form>
          <div id="wikigle-buttons">
            <a href="#" class="btn btn-default" id="wikiSearch" >Wiki Search</a>
            <a href="https://en.wikipedia.org/wiki/Special:Random" class="btn btn-default">Some Random Sh*t</a>
          </div>
      </div>

      <div id="results">
          <!--<p>The user search for: <h1>{{ wikiKeyword }}</h1></p>-->

          <ul>
            <li>
              <h2><a href="#">Digikey Electronics</a></h2>
              <p><a href="#">http://www.somewhere.com/blahblahblah/digikey/</a></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. </p>
            </li>
            <li>
              <h2><a href="#">Mouser Electronics</a></h2>
              <p><a href="#">http://www.somewhere.com/blahblahblah/digikey/</a></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu as augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
            </li>
            <li>
              <h2><a href="#">Allied Electronics</a></h2>
              <p><a href="#">http://www.somewhere.com/blahblahblah/digikey/</a></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
            </li>    
            <li>
              <h2><a href="#">Mouser Electronics</a></h2>
              <p><a href="#">http://www.somewhere.com/blahblahblah/digikey/</a></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu as augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
            </li>
            <li>
              <h2><a href="#">Allied Electronics</a></h2>
              <p><a href="#">http://www.somewhere.com/blahblahblah/digikey/</a></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
            </li>                      
          </ul>
      </div>

    </div> <!-- #wikigle -->

    <script>
      // Setup VueJs for this app
      var app = new Vue({
        el: '#wikigle',

        data: {
          wikiKeyword: '',
          wikiResponse: ''
        }
      })

      // NOTE: This is a sample call to the Wikipedia API 
      // https://en.wikipedia.org/w/api.php?format=json&action=query&generator=search&gsrlimit=100&prop=pageimages|extracts&pilimit=max&exintro&explaintext&exsentences=1&exlimit=max&gsrsearch=bill+clinton

      // Setup click handlers
      $('#wikiSearch').click(function(){
        $.ajax({
          method: "GET",
          url: "https://en.wikipedia.org/w/api.php",
          data: { 
                  format: "json", 
                  action: "query",
                  generator: "search",
                  gsrlimit: "100",
                  prop: "pageimages|extracts",
                  pilimit: "max",
                  exintro: "",
                  explaintext: "",
                  exsentences: "2",
                  exlimit: "max",
                  origin: '*',                 // CORS
                  gsrsearch: app.wikiKeyword   // search term (coming from Vue instance)
                }
        })
        .done(function( response ) {
          // alert( "Data Saved: " + response );
          app.wikiResponse = response;
        });
      })

      // disable form ENTER key for the input text box
      $("#form").submit(function(event){
        event.preventDefault();
      })

      // capture ENTER key on input field, and generate click event for wikiSearch button
      $("#wikiKeyword").keyup(function(event){
          if(event.keyCode == 13){
              $("#wikiSearch").click();   // trigger the click event, same as clicking the button
              event.preventDefault();
              return false;   // to prevent the form from being submitted
          }
      });
      
    
    
    </script>

  </body>
</html>